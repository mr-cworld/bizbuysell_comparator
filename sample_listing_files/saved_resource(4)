function exists(n){var t=n.split(".");return t.reduce(function(n,t){return typeof n=="undefined"?n:n[t]},window)}function InitListings(n){function c(n,t,i){n=n||"";t=t||function(){};i=i||function(){};n!=""&&$.ajax({url:"/xcommon/Services/Geo.asmx/GetCountiesByRegionAbbreviation",type:"POST","async":!1,dataType:"json",contentType:"application/json; charset=utf-8",data:JSON.stringify({regionAbbreviation:n}),success:function(n){typeof t=="function"&&(n=n&&n.d?n.d:[],t(n))},error:function(){typeof i=="function"&&i()}})}function l(n,t){var r,u,f,e;if(n=n||[],t=t||[],r=$("#ddlSavedSearches"),r)if(r.children().length>1&&r.children(":not(:first)").remove(),n.length>0){for(u=0;u<n.length;u++)f=n[u].Name,f.length>50&&(f=f.substring(0,50)+"..."),e=$("<option><\/option>").attr("value",n[u].SavedSearchId).text(f),r.append(e);r.change(function(){i.Listings&&typeof Listings.LoadSavedSearch=="function"&&Listings.LoadSavedSearch.call(this,n,null,t)});$.browser.msie&&r.css("float","right");document.location.hash="loadSavedSearches"}else r.prop("disabled",!0)}function p(n){n=n||[];e>0&&n.length>0&&$.inArray(e,n)>=0&&$("#liWatchListing").removeClass("listingWatched").addClass("listingWatched")}function a(n,t,i){n=n||0;n>0&&$.ajax({type:"POST",url:"/listings/Services/ListingUtilities.asmx/AddWatchedBizop","async":!1,dataType:"json",contentType:"application/json; charset=utf-8",data:JSON.stringify({listNumber:n}),success:function(t){i(t,n)},error:function(){i(!1,n)}})}var t={},i=this,e=0,r=n.SyndicatorID||0,u=n.PersonID||0,f=n.SortedArrays||{Titles:[],Locations:[],Categories:[],IDs:[],RefIDs:[]},o=0,v="syndicatedListingRow_",y=n.SyndicatedListingsListID||"",s=40,h=!1;return t.LinkListing=function(n,t,i){n=n||0;t=t||"";n>0&&t!=""&&r>0&&u>0&&$.ajax({url:"/xcommon/Services/Syndication/SyndicationUtilities.asmx/LinkListing",type:"POST",dataType:"json",contentType:"application/json; charset=utf-8",data:JSON.stringify({syndicatorID:r,personID:u,listNumber:n,syndicatedListNumber:t}),"async":!1,success:function(n){n=n?n.d:!1;typeof i=="function"&&i(n)},error:function(){}})},t.UnlinkListing=function(n,t,i){n=n||0;t=t||"";n>0&&t!=""&&r>0&&u>0&&$.ajax({url:"/xcommon/Services/Syndication/SyndicationUtilities.asmx/UnlinkListing",type:"POST",dataType:"json",contentType:"application/json; charset=utf-8",data:JSON.stringify({syndicatorID:r,personID:u,listNumber:n,syndicatedListNumber:t}),"async":!1,success:function(n){n=n?n.d:!1;typeof i=="function"&&i(n)},error:function(){}})},t.PushNewSyndicatedListing=function(n,t){n=n||0;r>0&&u>0&&n>0&&$.ajax({url:"/xcommon/Services/Syndication/SyndicationUtilities.asmx/PushNewSyndicatedListing",type:"POST",dataType:"json",contentType:"application/json; charset=utf-8",data:JSON.stringify({syndicatorID:r,personID:u,listNumber:n}),"async":!1,success:function(n){n=n?n.d:!1;typeof t=="function"&&t(n)},error:function(){}})},t.SortListings=function(n){var t=[],e=!1,r,i,u;n=n||0;switch(n){case 10:t=f.Titles;break;case 20:t=f.Locations;break;case 30:t=f.Categories;break;case 40:t=f.IDs;break;case 50:t=f.RefIDs}if(n>0&&(o==n&&(e=!0),o=n),r=$("#"+y),r&&t.length>0)for(e&&(t=t.slice(0).reverse(),o=0),i=0;i<t.length;i++)u=$("#"+v+t[i]),u&&r.append(u)},t.SaveSearch=function(n,t,i,r,u){n=n||"";t=t||"";typeof i!="function"&&(i=function(){});n!=""&&t!=""&&$.ajax({url:"/listings/Services/ListingUtilities.asmx/SaveSearch",type:"POST",dataType:"json",contentType:"application/json; charset=utf-8",data:JSON.stringify({name:n,searchCritera:t}),"async":!1,success:function(n){n=n?n.d:0;n>0&&typeof i=="function"?i():n<0&&typeof r=="function"?(r(),typeof u=="function"&&u()):typeof u=="function"&&u()},error:function(){typeof u=="function"&&u()}})},t.SavedSearchExists=function(){var n=i.SaveSearchUrl+"/v1/SavedSearchExists/20/"+i.Credentials.PersonId;$.get(n,{BfsSearchCriteria:i.ListingSearchCriteria},function(){})},t.NewSaveSearch=function(n,t,r,u,f,e,o,s,h,c){n=n||"";f=f||"";typeof s!="function"&&(s=function(){});$.ajax({url:i.SaveSearchUrl+"CreateSavedSearch",type:"POST",data:JSON.stringify({SiteId:20,CreateContactEntry:!1,Email:o.Email!==""?o.Email:MyBBS.Email,PersonId:o.PersonId!==0?o.PersonId:MyBBS.PersonID,Name:n,SavedSearchTypeId:10,SavedSearchStatusId:10,DeliveryScheduleId:t,InstantAlert:u===1?!0:!1,AllowProspect:r===1?!0:!1,DateCreated:(new Date).getDate(),BfsSearchCriteria:e}),contentType:"application/json",success:function(n){if(n){var t=0;n&&n.Value&&(t=n.Value.SavedSearchId);t>0&&typeof s=="function"?s():t<0&&typeof h=="function"?(h(),typeof c=="function"&&c()):typeof c=="function"&&c()}},error:function(){c()}})},t.ViewAttachment=function(n){var t=!!(i.MyBBS&&MyBBS.IsUserLoggedIn),r;n=atob(n);$("#hlLogin").attr("data-bs-dismiss","");r=function(){i.open(n,"_blank")};DataLayerUtilities.eventViewDocumentClick(MyBBS.PersonID);t&&n!==""?r():!t&&n!==""&&i.MyBBS&&typeof MyBBS.ToggleSignInPopup=="function"&&(DataLayerUtilities.eventViewDocumentSignInClick(),MyBBS.ToggleSignInPopup({RegistrationType:130,RegistrationSourceTypeId:190,OnRegistrationSuccessfulRedirectUrl:""}))},t.LoadSavedSearch=function(n,t,i){var f,r,u,e;if(n=n||[],t=t||"https://www.bizbuysell.com",f=parseInt(this.value,10),f>0){for(r="",u=0;u<n.length;u++)if(e=n[u].SavedSearchId||0,e==f){r=i[u];break}r!=""&&(top.location=t+(r.startsWith("/")?"":"/listings/Search.aspx?")+r)}},t.SavedSearchLogin=function(n,t){n=n||{};t=t||"signin";this.value==t&&i.MyBBS&&typeof MyBBS.ToggleSignInPopup=="function"&&(MyBBS.ToggleSignInPopup(n),$(this).parent("select option:first").prop("selected",!0))},t.TrackListingAction=function(n,t,i,r,u,f){n=n||0;t=t||0;i=i||0;u=u||function(){};f=f||function(){};typeof r=="undefined"&&(r=!0);r&&n>0&&t>0&&$.ajax({url:"/listings/Services/ListingUtilities.asmx/TrackListingEvent",type:"POST",dataType:"json",contentType:"application/json; charset=utf-8",data:JSON.stringify({listNumber:n,iActionType:t,coBrandID:i}),"async":!0,success:function(){u&&u()},error:function(){f&&f()}})},t.AddListingToWatchList=function(n,t,r){var u,f;n=n||0;u=!!(i.MyBBS&&MyBBS.IsUserLoggedIn);t=t||"";f=$(this).parent("li");u&&n>0?a(n,f,r):!u&&n>0&&i.MyBBS&&typeof MyBBS.ToggleSignInPopup=="function"&&(MyBBS.ToggleSignInPopup({RegistrationType:s,RegistrationSourceTypeId:100,OnRegistrationSuccessfulRedirectUrl:t}),h||($(document).bind("OnMyBBSLoginSuccessful",function(t,u,e){u=u||0;e=!!e;switch(u){case s:a(n,f,function(n){r(n);e&&i.location.reload()})}}),h=!0))},t.RemoveListingFromWatchListWithCallback=function(n,t){n=n||0;n>0&&$.ajax({type:"POST",url:"/listings/Services/ListingUtilities.asmx/RemoveWatchedBizop","async":!1,dataType:"json",contentType:"application/json; charset=utf-8",data:JSON.stringify({listNumber:n}),success:function(i){i=i?i.d:!1;t(i,n)},error:function(){t(!1,n)}})},t.RemoveListingFromWatchList=function(n){if(n=n||0,n>0){var t=$(this).parent("li");$.ajax({type:"POST",url:"/listings/Services/ListingUtilities.asmx/RemoveWatchedBizop","async":!1,dataType:"json",contentType:"application/json; charset=utf-8",data:JSON.stringify({listNumber:n}),success:function(n){n=n?n.d:!1;t.toggleClass("listingWatched")},error:function(){}})}},t.SetCurrentListNumber=function(n){n=n||0;n>0&&(e=n)},t.OnLoginSuccessful=function(n,t,i){n=n||[];i=i||[];t=t||[];l(n,i);p(t)},t.LoadCountiesByRegionAbbreviationNew=function(n,t,i){var r,u,f;n=n||"";t=t||"";i=i||[];n!=""&&t!=""&&(r=$("#"+t),u=$(n).filter(":checked"),r!=null&&r.length>0&&r.empty(),r!=null&&u!=null&&u.length==1?(f=u[0].value,f!=""&&f.toUpperCase()!="XX"&&(r.append("<strong>Loading...<\/strong>"),c(f,function(n){var e=15,c=4,l=!1,u,o,s,a,v,t,h,f;if(n=n||[],n.length>0){for(r.empty(),e=n.length/c,t=0,u=0;u<c;u++){for(o=$('<div class="col-3"><\/div>'),s=u*e;s<(u+1)*e&&t<n.length;s++)a="<label><\/label>",v=$(a).attr({"class":"checkbox",text:n[t].CountyName}).append($("<input/>").attr({"class":"checkbox CountyCheckbox",name:"county",type:"checkbox",value:n[t].CountyCode,"data-checked":"no"})).append(n[t].CountyName),v.appendTo(o),t++;o.appendTo(r)}if(i.length>0)for(t=0;t<i.length;t++)h=parseInt(i[t],10),h>0&&(f=r.children("div").children("label").children('input[value="'+h+'"]'),f.length==1&&(f.prop("checked",!0),f.attr("data-checked","yes"),l=!0))}else{$("#CountyModalLink").removeAttr("href").addClass("disabled");$("#CountyModalLink").text("Any County");return}l||$("#CountyModalLink").text("Any County");$(".checkbox input").click(function(n){n.stopPropagation()});$("#CountyModalLink").attr("href","#CountyModal").removeClass("disabled")},function(){r.append("<strong>Error Loading<\/strong>")}))):$("#CountyModalLink").removeAttr("href").addClass("disabled"))},t.LoadCountiesByRegionAbbreviation=function(n,t,i,r,u,f,e){var s,o,l,h;n=n||"";t=t||"";i=i||[];r=r||"Select one state to search by county";f=typeof f=="undefined"?!0:!!(f||"");n!=""&&t!=""&&(s=$("#"+n),o=$("#"+t),s.length>0&&o.length>0&&(l=!1,o.empty(),h="",s.attr("multiple")?s.val()&&s.val().length==1&&(h=s.val()[0]):h=s.val(),h!=""&&h.toUpperCase()!="XX"?(o.append(new Option("Loading...","")),c(h,function(n){var h,t,c,s;if(n=n||[],o.empty(),n.length>0){for(h=!0,f&&$("<option><\/option>").val("").html("-All Counties-").appendTo(o),t=0;t<n.length;t++){var l=n[t].CountyCode,s=$("<option><\/option>").val(l).html(n[t].CountyName);s.appendTo(o)}if(o.prop("disabled",!1),i.length>0)for(t=0;t<i.length;t++)c=parseInt(i[t],10),c>0&&(s=o.children('option[value="'+c+'"]'),s.length==1&&(s.prop("selected",!0),h=!1));h&&o.attr("selectedIndex",0);typeof u=="function"&&u()}else $("<option><\/option>").val("").html(r).appendTo(o),o.prop("disabled",!0),typeof e=="function"&&e()},function(){o.empty();$("<option><\/option>").val("").html("Error retrieving counties.").appendTo(o)})):($("<option><\/option>").val("").html(r).appendTo(o),o.prop("disabled",!0),typeof u=="function"&&u())))},document.addEventListener("DOMContentLoaded",function(){if(document.location.hash=="#loadSavedSearches"){var n=$("#ddlSavedSearches");n&&n.prop("disabled",!0);$.ajax({url:"/listings/Services/ListingUtilities.asmx/GetSavedSearches",type:"POST",dataType:"json",contentType:"application/json; charset=utf-8",data:JSON.stringify({type:10}),"async":!1,success:function(t){t=t?t.d:{IsUserLoggedIn:!1,SavedSearches:[]};t.IsUserLoggedIn&&t.SavedSearches!=null&&l(t.SavedSearches);n&&n.prop("disabled",!1)},error:function(){}})}}),$(".broker-my-listings").click(function(){document.cookie="currentBrokerTab=Listings;"}),$("#my-element").length&&$(".withplaceholder input").val().length>15&&$(this).prev().removeClass("on").animate({opacity:"0"},0),$(".withplaceholder input").bind("change paste keyup",function(){var n=$(this);n.val()==""||n.val().length>15?n.prev().removeClass("on").animate({opacity:"0"},0):n.prev().addClass("on").animate({opacity:"1"},0)}).each(function(n,t){var i=$(t);i.val()!=""&&i.prev().addClass("on").animate({opacity:"1"},0)}),t}document.addEventListener("DOMContentLoaded",function(){var n=new IntersectionObserver(function(n,t){n.forEach(function(n){n.isIntersecting&&(preloadImage(n.target),t.unobserve(n.target))})},{rootMargin:"0px 0px 50px 0px",threshold:0}),t=document.querySelectorAll("[data-defer-url]");t.forEach(function(t){n.observe(t)})});var Listings=InitListings(window.ListingsInitValues||{})